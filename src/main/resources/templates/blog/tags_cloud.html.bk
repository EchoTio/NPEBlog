<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>旅行轨迹</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://fonts.googleapis.com/css?family=Finger+Paint" rel="stylesheet">
    <script type="text/javascript" th:src="@{/js/jquery-3.4.1.js}"></script>
    <script type="text/javascript" th:src="@{/plugins/wordcloud/wordcloud2.js}"></script>
</head>
<body>
    <div id="canvas-container" style="float: left">
        <canvas id="word_cloud" class="word_cloud" width="400" height="400"></canvas>
    </div>
</body>

<script type="text/javascript" th:inline="none">
    $(document).ready(function(){
        console.log("start")
        $.ajax({
            url: /*[[@{/blog/tags_cloud/json}]]*/"tags_cloud/json",
            type:"GET",
            dataType: "json",
            contentType:"application/json",
            success:function (data) {
                console.log(data)
                let wordFreqData = new Array();
                for (let i = 0; i < data.length; i++) {
                    let option = [data[i].name, data[i].freq];
                    wordFreqData.push(option);
                }
                console.log(wordFreqData)
                let canvas = document.getElementById('word_cloud');
                let options = eval({
                    "list": wordFreqData,//或者[['各位观众',45],['词云', 21],['来啦!!!',13]],只要格式满足这样都可以
                    "gridSize": 18, // 密集程度 数字越小越密集
                    "weightFactor": 3, // 字体大小=原始大小*weightFactor
                    "maxFontSize": 60, //最大字号
                    "minFontSize": 14, //最小字号
                    "hover": window.drawBox,
                    "fontWeight": 'normal', //字体粗细
                    "fontFamily": 'Finger Paint, cursive, sans-serif', // 字体
                    "color": '#f0f0c0', // 字体颜色 'random-dark' 或者 'random-light'
                    "backgroundColor": '#001f00', // 背景颜色
                    "rotateRatio": 1 // 字体倾斜(旋转)概率，1代表总是倾斜(旋转)
                });
                WordCloud(canvas, options);
            }
        });
        console.log("end")
    })
</script>
</html>